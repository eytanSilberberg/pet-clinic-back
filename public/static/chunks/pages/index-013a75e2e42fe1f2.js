(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(8306)}])},8306:function(e,n,t){"use strict";t.r(n),t.d(n,{default:function(){return R}});var r=t(7568),s=t(4051),a=t.n(s),o=t(5893),i=t(7294),l=t(6042),c=t(2882),u=t(5113),d=t(7906),p=t(3184),x=t(3816),h=t(3252),f=t(295),m={padding:{xs:"10px",sm:"15px",md:"15px",lg:"20px",xl:"20px"}},v=function(e){var n=e.pet,t=e.removePet,r=e.updatePet,s=e.chosenButtons,a=e.setChosenButtons,c=(0,i.useState)(!1),u=c[0],d=c[1],p=function(){window.innerWidth>650?d(!0):d(!1)};return(0,i.useEffect)((function(){window.addEventListener("resize",p),p()}),[]),(0,o.jsxs)(x.Z,{sx:{"&:last-child td, &:last-child th":{border:0},margin:{sm:"10px"}},children:[!u&&(0,o.jsxs)(h.Z,{sx:{padding:{xs:"10px",md:0},margin:{sm:"10px"}},children:[" ",(0,o.jsx)("img",{className:" rounded object-cover md:w-full md:h-24",src:n.image,alt:""})]}),(0,o.jsx)(h.Z,{sx:(0,l.Z)({},m),children:(0,o.jsxs)("div",{className:"relative w-full h-full shadow-inner-[0_1px_1px_1px_1px] ",children:[(0,o.jsx)("span",{className:"md:shadow-sm rounded-tr-lg md:p-2.5 md:bg-shadowClr/[.5] md:absolute bottom-0 md:text-white xs:text-xl ",children:n.petName}),u&&(0,o.jsx)("img",{className:" rounded object-cover md:w-full md:h-24",src:n.image,alt:""})]})}),(0,o.jsx)(h.Z,{sx:(0,l.Z)({},m),component:"th",scope:"row",children:n.ownerName}),u&&(0,o.jsx)(h.Z,{sx:(0,l.Z)({},m),children:n.phone}),u&&(0,o.jsx)(h.Z,{sx:(0,l.Z)({},m),children:n.petType}),(0,o.jsx)(h.Z,{sx:{width:"190px"},children:(0,o.jsxs)("div",{className:"flex gap-1 relative w-full h-full justify-center items-center",children:[(0,o.jsx)("button",{onClick:function(){return a(n._id)},className:"bg-priClr hover:bg-secClr font-bold py-2 px-4 rounded-r ".concat(s===n._id?"hidden":"block","  md:hidden"),children:"Show"}),(0,o.jsxs)("div",{className:"button-wrapper ".concat(s===n._id?"flex relative":"xs:hidden"," justify-center h-full w-full   md:flex"),children:[(0,o.jsx)("button",{className:"bg-textureClr hover:bg-red transition-all duration-[200ms] md:hidden absolute translate-y-[-120%] rounded h-7 w-7 top-0 right-0 ",onClick:function(){return a(null)},children:"X"}),(0,o.jsx)("button",{onClick:function(e){e.stopPropagation(),t(n._id)},className:"bg-priClr hover:bg-secClr font-bold py-2 px-4 rounded-l",children:"Delete"}),(0,o.jsx)("button",{onClick:function(e){e.stopPropagation(),r(n)},className:"bg-priClr hover:bg-secClr font-bold py-2 px-4 rounded-r",children:"Update"})]})]})})]})},b={padding:{xs:"10px",sm:"15px",md:"15px",lg:"20px",xl:"20px"}};function w(e){var n=e.pets,t=e.removePet,r=e.updatePet,s=(0,i.useState)(!1),a=s[0],m=s[1],w=function(){window.innerWidth>650?m(!0):m(!1)};(0,i.useEffect)((function(){window.addEventListener("resize",w),w()}),[]);var j=(0,i.useState)(null),g=j[0],N=j[1];return(0,o.jsx)("div",{className:"table-wrapper h-[35rem] w-full overflow-scroll flex justify-start ",children:(0,o.jsx)(c.Z,{component:u.Z,sx:(0,l.Z)({},b),children:(0,o.jsxs)(d.Z,{"aria-label":"simple table",children:[(0,o.jsx)(p.Z,{sx:{backgroundColor:"#CBE7DE"},children:(0,o.jsxs)(x.Z,{children:[!a&&(0,o.jsx)(h.Z,{sx:(0,l.Z)({},b),children:(0,o.jsx)("span",{children:"Image"})}),(0,o.jsx)(h.Z,{sx:(0,l.Z)({},b),children:(0,o.jsx)("span",{children:"Pet name"})}),(0,o.jsx)(h.Z,{sx:(0,l.Z)({},b),children:(0,o.jsx)("span",{children:"Owner's name"})}),a&&(0,o.jsx)(h.Z,{sx:(0,l.Z)({},b),children:(0,o.jsx)("span",{children:"Phone number"})}),a&&(0,o.jsx)(h.Z,{sx:(0,l.Z)({},b),children:(0,o.jsx)("span",{children:"Pet type"})}),(0,o.jsx)(h.Z,{align:"center",children:(0,o.jsx)("div",{className:"",children:"actions"})})]})}),(0,o.jsx)(f.Z,{children:n.map((function(e,n){return(0,o.jsx)(v,{setChosenButtons:N,chosenButtons:g,pet:e,removePet:t,updatePet:r},n)}))})]})})})}var j=t(603),g=t(4924),N=t(9396),y=function(e,n){var t=(0,i.useState)(e),r=t[0],s=t[1];return function(e,n){var t=(0,i.useRef)(!1);(0,i.useEffect)((function(){t.current?e():t.current=!0}),n)}((function(){n&&n(r)}),[r]),[r,function(e){var n=e.target,t=n.name,r="number"===n.type?+n.value||"":n.value;s((function(e){return(0,N.Z)((0,l.Z)({},e),(0,g.Z)({},t,r))}))},s]},C=t(2361),Z=function(e){var n=e.pet,t=e.submitForm,r=e.isModalOpen,s=e.isShadow,a=e.setShadow,i=e.setModal,l=e.setPetToUpdate,c=(0,j.Z)(y(n?{ownerName:n.ownerName,petName:n.petName,petType:n.petType,phone:n.phone,_id:n._id}:{ownerName:"",petName:"",petType:"",phone:""}),2),u=c[0],d=c[1];return(0,o.jsxs)("section",{className:"fixed w-full h-full flex ",children:[(0,o.jsx)("div",{onClick:function(){i(!1),a(!1),setTimeout((function(){l(null)}),500)},className:"shadow duration-[400ms] inset-0 absolute ".concat(r?"z-[0]":"z-[-1]"," ").concat(s?"bg-shadowClr bg-opacity-75":"bg-inherit")}),(0,o.jsxs)("div",{className:"form-wrapper px-12 transition-transform duration-[600ms] fixed top border w-1/2 max-w-xl h-fit left-1/4 bg-secClr  ".concat(s?"translate-y-0":" translate-y-[-150%]"),children:[(0,o.jsx)("h1",{className:"text-xl font-normal leading-normal mt-2 mb-2",children:n?"Edit ".concat(n.petName):"Add a new pet to the family"}),(0,o.jsxs)("form",{onSubmit:function(e){t(u)},className:"bg-white p-6 rounded flex flex-col gap-3.5 mb-8",children:[(0,o.jsx)(C.Z,{value:u.ownerName,name:"ownerName",onChange:d,type:"text",required:!0,id:"outlined-required",label:"Owners name",fullWidth:!0}),(0,o.jsx)(C.Z,{value:u.petName,name:"petName",onChange:d,type:"text",required:!0,id:"outlined-required",label:"Pets name",fullWidth:!0}),(0,o.jsx)(C.Z,{value:u.phone,name:"phone",onChange:d,type:"tel",required:!0,id:"outlined-required",label:"Owners phone number",fullWidth:!0}),(0,o.jsx)(C.Z,{value:u.petType,name:"petType",onChange:d,type:"text",required:!0,id:"outlined-required",label:"Pet type",fullWidth:!0}),(0,o.jsx)(C.Z,{value:u.image,name:"image",onChange:d,type:"text",required:!0,id:"outlined-required",label:"Image link",fullWidth:!0}),(0,o.jsx)("button",{className:"bg-white font-semibold transition-all duration-[200ms] hover:bg-priClr py-2 px-4 border hover:border-transparent rounded",children:"Submit"})]})]})]})},k=function(e){var n=e.isController,t=e.setControllers,r=e.isModalOpen,s=e.setModal,a=e.setFocusOnSearch,l=(0,i.useRef)(null),c=(0,i.useRef)(null),u=(0,i.useRef)(null);return(0,o.jsx)("div",{className:"fixed right-0 h-[100vh] ",children:(0,o.jsxs)("div",{className:"shadow-[0_px_3px_1px_rgba(0,0,0,0.3)] bg-white fixed right-0 transition-transform duration-[300ms] absolute top-[200px] w-60 text-center border-y border-l rounded   ".concat(n?"translate-x-0":"translate-x-full"),children:[(0,o.jsx)("h1",{className:"text-xl font-normal leading-normal mt-0 p-4 mx-4 border-b border-shadowClr",children:"Controller"}),(0,o.jsxs)("p",{className:"flex flex-col",children:[(0,o.jsx)("span",{ref:l,onClick:function(){return t(!n)},className:"cursor-pointer transition-all duration-[200ms] p-4 hover:bg-priClr",children:"Ctrl+T=Toggle Controller"}),(0,o.jsx)("span",{ref:c,onClick:function(){s(!r),t(!n)},className:"cursor-pointer transition-all duration-[200ms] p-4 hover:bg-priClr",children:"Ctrl+k=Add new Pet"}),(0,o.jsx)("span",{onClick:function(){a(),t(!n)},ref:u,className:"cursor-pointer transition-all duration-[200ms] p-4 hover:bg-priClr",children:"S=Search for a pet "})]})]})})},_=t(9669),S=t.n(_)().create({withCredentials:!0,baseURL:"/api/pet"}),P=function(){return S.get("/").then((function(e){return e.data}))},E=function(e){return S.put("/".concat(e._id),e).then((function(e){return e.data}))},T=function(e){return S.post("/",e).then((function(e){return e.data}))},M=function(e){return S.delete("/".concat(e)).then((function(e){return e.data}))},O=t(8767),q=t(7588),R=function(){var e=function(){var e=(0,r.Z)(a().mark((function e(){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P();case 2:return n=e.sent,s(n),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),n=(0,i.useState)([]),t=n[0],s=n[1],l=(0,i.useState)(!1),c=l[0],u=l[1],d=(0,i.useState)(!1),p=d[0],x=d[1],h=(0,i.useState)(!1),f=h[0],m=h[1],v=(0,i.useState)(null),b=v[0],j=v[1],g=(0,O.useQuery)("pets",e),N=g.status,y=g.refetch,C=(0,i.useRef)(null),_=(0,i.useState)([]),S=_[0],R=_[1],L=(0,O.useMutation)(E,{onSuccess:function(){y()}}).mutate,W=(0,O.useMutation)(T,{onSuccess:function(){var e=(0,r.Z)(a().mark((function e(n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:y();case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()}),B=W.mutate,F=(0,O.useMutation)(M,{onSuccess:(0,r.Z)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:y();case 1:case"end":return e.stop()}}),e)})))}).mutate,z=function(e){var n;("keydown"===e.type&&(p||"t"===e.key&&e.ctrlKey&&u(!c),e.ctrlKey&&"k"===e.key&&(p?p&&(m(!1),setTimeout((function(){x(!1)}),500)):(x(!0),setTimeout((function(){m(!0)}),200)))),"keyup"===e.type)&&("s"===e.key&&(p||null===(n=C.current)||void 0===n||n.focus()))};(0,i.useEffect)((function(){return document.addEventListener("keyup",z),document.addEventListener("keydown",z),function(){document.removeEventListener("keyup",z),document.removeEventListener("keydown",z)}}));var U=function(e){!1===e?(m(e),setTimeout((function(){x(e)}),200)):(x(e),setTimeout((function(){m(e)}),200))},A=function(){var e=(0,r.Z)(a().mark((function e(n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x(!1),e.prev=1,!n._id){e.next=6;break}L(n),e.next=9;break;case 6:if(n._id){e.next=9;break}return e.next=9,B(n);case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(n){return e.apply(this,arguments)}}(),X=function(){var e=(0,r.Z)(a().mark((function e(n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,F(n);case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(n){return e.apply(this,arguments)}}(),D=function(){var e=(0,r.Z)(a().mark((function e(n){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:j(n),U(!0);case 2:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return"loading"===N?(0,o.jsx)("div",{children:"loading"}):"error"===N?(0,o.jsx)("div",{children:"Error"}):(0,o.jsx)("div",{className:"app bg-body",children:(0,o.jsxs)("div",{className:"grid grid-cols-main-layout font-sans h-[89vh]",children:[(0,o.jsxs)("main",{className:"col-start-2",children:[!t&&(0,o.jsx)(i.Fragment,{}),t&&(0,o.jsxs)("section",{className:"flex flex-col",children:[(0,o.jsxs)("section",{className:"table-functions py-3 flex gap-10",children:[(0,o.jsx)("button",{className:"bg-priClr hover:bg-secClr font-bold py-2 px-4 rounded",onClick:function(){return U(!0)},children:"Add pet"}),(0,o.jsx)(q.Z,{id:"standard-basic",label:"Search a pet",variant:"standard",inputRef:C,onChange:function(e){var n=new RegExp(e.target.value,"i"),r=t.filter((function(e){if(e.ownerName.match(n)||e.petName.match(n)||e.petType.match(n)||e.phone.match(n))return e}));R(r)}})]}),(0,o.jsx)(w,{pets:0===S.length?t:S,removePet:X,updatePet:D})]})]}),p&&(0,o.jsx)(Z,{setPetToUpdate:j,pet:b,submitForm:A,isModalOpen:p,isShadow:f,setShadow:m,setModal:U}),(0,o.jsx)(k,{setFocusOnSearch:function(){var e;null===(e=C.current)||void 0===e||e.focus()},isModalOpen:p,setModal:U,setControllers:u,isController:c}),(0,o.jsxs)("button",{onClick:function(){return u(!0)},className:"transition-all duration-[200ms] flex flex-col items-center rotate-[270deg] bg-red fixed top-1/2 right-0 ".concat(c?"translate-x-3/4":"translate-x-[50%] hover:translate-x-1/3"," w-36 rounded-t-lg"),children:[(0,o.jsx)("span",{children:" Press me"}),(0,o.jsx)("span",{children:" to view controls"})]})]})})}}},function(e){e.O(0,[962,774,888,179],(function(){return n=8312,e(e.s=n);var n}));var n=e.O();_N_E=n}]);